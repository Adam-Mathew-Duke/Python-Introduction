# Get some basic MTG card information using the
# scrython and fetcher APIs

# search and card information
import scrython

# price
from sf_price_fetcher import fetcher

# convert to local currency
from currency_converter import CurrencyConverter

# input a card name to search for
print ("\n")
p = input("Enter card name: ")
print ("\n")

# convert the text to uppercase
u = p.upper()

try:
	# get a random card name if you input the word random
	if u == "RANDOM":
		card = scrython.cards.Random()
	else:
		# if it's not random then search for the card
		card = scrython.cards.Named(fuzzy=u)
except:
	# card was not found in the search for display a message
	print ("NAME: Card not found on Scryfall.")
else:
	# no errors so print the cards information
	print ("Name:\t"+card.name())
	print ("Set:\t"+card.set_name())
	print ("Type:\t"+card.type_line())
	print ("Rarity:\t"+card.rarity())
	print ("Number:\t"+ card.collector_number())

	try:
		# get the price of the card (if available)
		a = fetcher.get(card.name())	
	except:	
		# price is not available
		print("Price: Price not found on Scryfall.")
	else:
		# display the current USD price
		print("USD:\t$"+str(a))

		# convert from USD to AUD currency
		b = CurrencyConverter().convert(a,'USD','AUD')
		print(f"AUD:\t${b:.2f}")
		
		# URLs for more information
		print ("\n")
		print ("View Card: "+card.scryfall_uri())
		print ("View Set: "+card.scryfall_set_uri())
	finally:
		print ("\n")
		input("Press Enter to continue...")

# end of code
